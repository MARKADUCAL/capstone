<div class="forgot-password-container">
  <div class="forgot-password-card">
    <!-- Logo Section (Left) -->
    <div class="logo-section">
      <img src="assets/logo.jpg" alt="AutoWash Hub Logo" class="logo" />
      <h1 class="logo-title">AutoWash Hub</h1>
    </div>

    <!-- Form Section (Right) -->
    <div class="form-section">
      <div class="forgot-password-form">
        <!-- Request Reset Form -->
        <div *ngIf="!showVerificationForm && !showResetForm">
          <h2>Admin - Forgot Password?</h2>
          <p class="form-description">
            Enter your email address and we'll send you a verification code to reset your
            password.
          </p>

          <div *ngIf="errorMessage" class="error-message">
            {{ errorMessage }}
          </div>

          <div *ngIf="successMessage" class="success-message">
            {{ successMessage }}
          </div>

          <form (ngSubmit)="onSubmitRequest()" #requestForm="ngForm">
            <div class="form-group">
              <label for="email">Email Address</label>
              <input
                type="email"
                id="email"
                name="email"
                [(ngModel)]="email"
                required
                #emailInput="ngModel"
                aria-label="Email input"
                placeholder="Enter your email address"
                [disabled]="isLoading"
                class="form-control"
              />
            </div>

            <button
              type="submit"
              class="submit-btn"
              [disabled]="!requestForm.form.valid || isLoading"
            >
              <span *ngIf="!isLoading">Send Verification Code</span>
              <span *ngIf="isLoading">Sending...</span>
            </button>
          </form>
        </div>

        <!-- Verification Code Form -->
        <div *ngIf="showVerificationForm && !showResetForm">
          <h2>Enter Verification Code</h2>
          <p class="form-description">
            Please enter the verification code sent to your email address.
          </p>

          <div *ngIf="errorMessage" class="error-message">
            {{ errorMessage }}
          </div>

          <div *ngIf="successMessage" class="success-message">
            {{ successMessage }}
          </div>

          <form (ngSubmit)="onVerifyCode()" #verifyForm="ngForm">
            <div class="form-group">
              <label for="verificationCode">Verification Code</label>
              <input
                type="text"
                id="verificationCode"
                name="verificationCode"
                [(ngModel)]="verificationCode"
                required
                #verificationCodeInput="ngModel"
                aria-label="Verification code input"
                placeholder="Enter verification code"
                class="form-control"
                maxlength="64"
              />
            </div>

            <button
              type="submit"
              class="submit-btn"
              [disabled]="!verifyForm.form.valid"
            >
              Verify Code
            </button>
          </form>
        </div>

        <!-- Reset Password Form -->
        <div *ngIf="showResetForm">
          <h2>Reset Your Password</h2>
          <p class="form-description">Enter your new password below.</p>

          <div *ngIf="errorMessage" class="error-message">
            {{ errorMessage }}
          </div>

          <div *ngIf="successMessage" class="success-message">
            {{ successMessage }}
          </div>

          <form (ngSubmit)="onSubmitReset()" #resetForm="ngForm">
            <div class="form-group">
              <label for="newPassword">New Password</label>
              <input
                type="password"
                id="newPassword"
                name="newPassword"
                [(ngModel)]="newPassword"
                required
                minlength="6"
                #newPasswordInput="ngModel"
                aria-label="New password input"
                placeholder="Enter your new password"
                [disabled]="isLoading"
                class="form-control"
              />
              <div
                *ngIf="newPasswordInput.invalid && newPasswordInput.touched"
                class="field-error"
              >
                Password must be at least 6 characters long
              </div>
            </div>

            <div class="form-group">
              <label for="confirmPassword">Confirm New Password</label>
              <input
                type="password"
                id="confirmPassword"
                name="confirmPassword"
                [(ngModel)]="confirmPassword"
                required
                #confirmPasswordInput="ngModel"
                aria-label="Confirm password input"
                placeholder="Confirm your new password"
                [disabled]="isLoading"
                class="form-control"
              />
              <div
                *ngIf="
                  confirmPasswordInput.touched &&
                  newPassword !== confirmPassword
                "
                class="field-error"
              >
                Passwords do not match
              </div>
            </div>

            <button
              type="submit"
              class="submit-btn"
              [disabled]="
                !resetForm.form.valid ||
                isLoading ||
                newPassword !== confirmPassword
              "
            >
              <span *ngIf="!isLoading">Reset Password</span>
              <span *ngIf="isLoading">Resetting...</span>
            </button>
          </form>
        </div>

        <div class="back-to-login">
          <button type="button" class="back-btn" (click)="goBackToLogin()">
            ‚Üê Back to Admin Login
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
