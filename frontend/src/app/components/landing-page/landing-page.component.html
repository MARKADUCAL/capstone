<!-- Navbar -->
<nav class="navbar">
  <div class="container">
    <div class="logo">
      <img
        src="assets/logo.jpg"
        alt="AutoWash Hub Logo"
        title="AutoWash Hub Logo"
      />
      <span>AutoWash Hub</span>
    </div>
    <div
      class="mobile-menu-toggle"
      [class.active]="mobileMenuOpen"
      (click)="toggleMobileMenu()"
    >
      <span></span>
      <span></span>
      <span></span>
    </div>
    <ul class="nav-links" [class.mobile-nav-active]="mobileMenuOpen">
      <li><a href="#hero" (click)="closeMobileMenu()">Home</a></li>
      <li><a href="#services" (click)="closeMobileMenu()">Services</a></li>
      <li><a href="#pricing" (click)="closeMobileMenu()">Pricing</a></li>
      <li><a href="#gallery" (click)="closeMobileMenu()">Gallery</a></li>
      <li><a href="#contact" (click)="closeMobileMenu()">Contact</a></li>
    </ul>
    <div class="get-started">
      <a href="/customer" class="btn">Get Started</a>
    </div>
  </div>
</nav>

<!-- Mobile Menu Overlay -->
<div
  class="mobile-menu-overlay"
  [class.active]="mobileMenuOpen"
  (click)="closeMobileMenu()"
></div>

<!-- Hero Section -->
<header
  class="hero"
  id="hero"
  [ngStyle]="{ 'background-image': 'url(' + content.heroBackgroundUrl + ')' }"
>
  <div class="hero-content">
    <h2>
      {{ content.heroTitle.split(" ").slice(0, 1).join(" ") }} <br />
      {{ content.heroTitle.split(" ").slice(1).join(" ") || "" }}
    </h2>
    <p>
      {{ content.heroDescription }}
    </p>
    <a (click)="onBookNowClick()" class="book-now-btn">Book Now</a>
  </div>
</header>

<!-- Services Section -->
<section class="services" id="services">
  <h2>SERVICES WE OFFER</h2>

  <!-- Loading State -->
  <div *ngIf="servicesLoading" class="services-loading">
    <div class="loading-spinner"></div>
    <p>Loading services...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="servicesError && !servicesLoading" class="services-error">
    <p class="error-message">{{ servicesError }}</p>
    <button class="btn-primary" (click)="loadServicesData()">Try Again</button>
  </div>

  <!-- Services Grid -->
  <div *ngIf="!servicesLoading && !servicesError" class="services-container">
    <div class="service-item" *ngFor="let s of services">
      <img [src]="s.imageUrl" [alt]="s.name" [title]="s.name" />
      <p>{{ s.name }}</p>
    </div>
  </div>

  <!-- Fallback to content.services if no dynamic services loaded -->
  <div
    *ngIf="!servicesLoading && !servicesError && services.length === 0"
    class="services-container"
  >
    <div class="service-item" *ngFor="let s of content.services">
      <img [src]="s.imageUrl" [alt]="s.name" [title]="s.name" />
      <p>{{ s.name }}</p>
    </div>
  </div>
</section>

<!-- Easy as 123 Section -->
<section class="easy-steps">
  <h2>Easy as 123</h2>
  <div class="steps-container">
    <div class="step">
      <h3>1</h3>
      <p>Identify <br />vehicle type</p>
    </div>
    <div class="step">
      <h3>2</h3>
      <p>Select <br />Services</p>
    </div>
    <div class="step">
      <h3>3</h3>
      <p>Determine the price <br />and take it easy!</p>
    </div>
  </div>
</section>

<!-- Pricing Section -->
<section class="pricing" id="pricing">
  <div class="pricing-container">
    <div class="section-header">
      <h2>Service Packages & Pricing</h2>
      <p>Choose the perfect service package for your vehicle</p>
    </div>

    <!-- Service Packages Explanation -->
    <div class="packages-explanation">
      <h3>Service Package Details</h3>
      <div class="packages-grid">
        <div *ngFor="let package of servicePackages" class="package-info">
          <h4>Package {{ package.code.replace("p", "") }}</h4>
          <p>{{ package.description }}</p>
        </div>
      </div>
    </div>

    <!-- Vehicle Types Explanation -->
    <div class="vehicle-types-explanation">
      <h3>Vehicle Type Classification</h3>
      <div class="vehicle-types-grid">
        <div *ngFor="let vehicle of vehicleTypes" class="vehicle-info">
          <h4>{{ vehicle.code }}</h4>
          <p>{{ vehicle.description }}</p>
        </div>
      </div>
    </div>

    <!-- Pricing Matrix -->
    <div class="pricing-section">
      <h3>Pricing Matrix</h3>

      <!-- Loading State -->
      <div *ngIf="loading" class="loading-state">
        <div class="loading-spinner"></div>
        <p>Loading pricing information...</p>
      </div>

      <!-- Error State -->
      <div *ngIf="pricingError && !loading" class="error-state">
        <p class="error-message">{{ pricingError }}</p>
        <button class="btn-primary" (click)="loadPricingData()">
          Try Again
        </button>
      </div>

      <!-- Pricing Table -->
      <div *ngIf="!loading && !pricingError" class="pricing-table-container">
        <div class="pricing-table">
          <table>
            <thead>
              <tr>
                <th class="vehicle-header">Vehicle Type</th>
                <th
                  *ngFor="let package of servicePackages"
                  class="package-header"
                >
                  <div class="package-title">
                    Package {{ package.code.replace("p", "") }}
                  </div>
                  <div class="package-desc">{{ package.description }}</div>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let vehicle of vehicleTypes" class="vehicle-row">
                <td class="vehicle-cell">
                  <div class="vehicle-code">{{ vehicle.code }}</div>
                  <div class="vehicle-desc">{{ vehicle.description }}</div>
                </td>
                <td *ngFor="let package of servicePackages" class="price-cell">
                  <div class="price-amount">
                    {{
                      formatPrice(
                        pricingMatrix[vehicle.code][package.code] || 0
                      )
                    }}
                  </div>
                  <button
                    class="btn-book-service"
                    (click)="
                      navigateToAppointmentWithPackage(
                        vehicle.code,
                        package.code
                      )
                    "
                    [disabled]="!isPriceAvailable(vehicle.code, package.code)"
                    [ngClass]="{
                      disabled: !isPriceAvailable(vehicle.code, package.code)
                    }"
                  >
                    {{
                      isPriceAvailable(vehicle.code, package.code)
                        ? "Book Now"
                        : "Unavailable"
                    }}
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Quick Booking Guide -->
      <div class="booking-guide">
        <h4>How to Book</h4>
        <ol>
          <li>Identify your vehicle type from the classification above</li>
          <li>Choose your preferred service package</li>
          <li>Click "Book Now" for your selected combination</li>
          <li>Complete your appointment details</li>
        </ol>
      </div>
    </div>
  </div>
</section>

<!-- Gallery Section -->
<section class="gallery" id="gallery">
  <h2>GALLERY</h2>
  <div class="gallery-container">
    <div class="gallery-item" *ngFor="let g of content.galleryImages">
      <img [src]="g.url" [alt]="g.alt" [title]="g.alt" />
    </div>
  </div>
</section>

<!-- Contact Section -->
<section class="contact" id="contact">
  <h2>Contact for any Query</h2>
  <div class="contact-info">
    <div class="quick-contact">
      <h3>Quick Contact Info</h3>
      <div class="contact-item">
        <i class="fas fa-map-marker-alt"></i>
        <p><strong>Address:</strong> {{ content.contactInfo.address }}</p>
      </div>
      <div class="contact-item">
        <i class="fas fa-clock"></i>
        <p>
          <strong>Opening Time:</strong> {{ content.contactInfo.openingHours }}
        </p>
      </div>
      <div class="contact-item">
        <i class="fas fa-phone"></i>
        <p><strong>Call Us:</strong> {{ content.contactInfo.phone }}</p>
      </div>
      <div class="contact-item">
        <i class="fas fa-envelope"></i>
        <p><strong>Email Us:</strong> {{ content.contactInfo.email }}</p>
      </div>
    </div>
    <form
      class="contact-form"
      (ngSubmit)="onSubmitContactForm()"
      #contactFormRef="ngForm"
    >
      <!-- Success/Error Messages -->
      <div *ngIf="contactSuccessMessage" class="success-message">
        {{ contactSuccessMessage }}
      </div>
      <div *ngIf="contactErrorMessage" class="error-message">
        {{ contactErrorMessage }}
      </div>

      <input
        type="text"
        class="input-medium"
        id="yourname"
        name="name"
        [(ngModel)]="contactForm.name"
        placeholder="Your Name"
        required
      />
      <input
        type="email"
        class="input-medium"
        id="youremail"
        name="email"
        [(ngModel)]="contactForm.email"
        placeholder="Your Email"
        required
      />
      <input
        type="text"
        class="input-small"
        id="subject"
        name="subject"
        [(ngModel)]="contactForm.subject"
        placeholder="Subject"
        required
      />
      <textarea
        class="input-large"
        id="message"
        name="message"
        [(ngModel)]="contactForm.message"
        placeholder="Message"
        required
      ></textarea>
      <button type="submit" [disabled]="isSubmitting">
        <span *ngIf="!isSubmitting">Send Message</span>
        <span *ngIf="isSubmitting">Sending...</span>
      </button>
    </form>
  </div>
</section>

<!-- Footer Section -->
<footer class="footer">
  <div class="footer-container">
    <div class="use-cases">
      <h3>Use Cases</h3>
      <ul>
        <li><a href="#">Car Owners</a></li>
        <li><a href="#">Fleet Managers</a></li>
        <li><a href="#">Auto Dealerships</a></li>
        <li><a href="#">Rideshare Drivers</a></li>
        <li><a href="#">Car Rental Companies</a></li>
      </ul>
    </div>
    <div class="quick-links">
      <h3>Quick Links</h3>
      <ul>
        <li><a href="#hero">Home</a></li>
        <li><a href="#services">Services</a></li>
        <li><a href="#pricing">Pricing</a></li>
        <li><a href="#gallery">Gallery</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
    </div>
    <div class="contact-us">
      <h3>Contact Us</h3>
      <p>üìç Address: {{ content.footer.address }}</p>
      <p>üìû Phone: {{ content.footer.phone }}</p>
      <p>‚úâÔ∏è Email: {{ content.footer.email }}</p>
    </div>
    <div class="follow-us">
      <h3>Follow Us</h3>
      <p>
        <a [href]="content.footer.facebook" target="_blank">Facebook</a> |
        <a [href]="content.footer.instagram" target="_blank">Instagram</a> |
        <a [href]="content.footer.twitter" target="_blank">Twitter</a> |
        <a [href]="content.footer.tiktok" target="_blank">TikTok</a>
      </p>
      <a routerLink="/customer" class="booknow-button">Book Now</a>
    </div>
  </div>
  <div class="footer-bottom">
    <p>
      {{ content.footer.copyright }}
    </p>
  </div>
</footer>

<!-- Custom Modal -->
<div class="modal-overlay" *ngIf="showModal">
  <div class="custom-modal">
    <div class="modal-header">
      <h3>AutoWash Hub</h3>
    </div>
    <div class="modal-body">
      <p>Do you want to proceed with booking?</p>
    </div>
    <div class="modal-footer">
      <button class="modal-btn modal-btn-ok" (click)="confirmBooking()">
        OK
      </button>
      <button class="modal-btn modal-btn-cancel" (click)="cancelBooking()">
        Cancel
      </button>
    </div>
  </div>
</div>

<!-- Removed Gmail Verification Modal -->
