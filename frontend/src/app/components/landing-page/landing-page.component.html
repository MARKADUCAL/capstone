<!-- Navbar -->
<nav class="navbar">
  <div class="container">
    <div class="logo">
      <img
        src="assets/logo3.png"
        alt="Leydi boss Logo"
        title="Leydi boss Logo"
        routerLink="/landing-page"
      />
      <span>Leydi boss</span>
    </div>
    <div
      class="mobile-menu-toggle"
      [class.active]="mobileMenuOpen"
      (click)="toggleMobileMenu()"
    >
      <span></span>
      <span></span>
      <span></span>
    </div>
    <ul class="nav-links" [class.mobile-nav-active]="mobileMenuOpen">
      <li><a href="#hero" (click)="closeMobileMenu()">Home</a></li>
      <li>
        <a href="#pricing" (click)="closeMobileMenu()">Services & Pricing</a>
      </li>
      <li><a href="#gallery" (click)="closeMobileMenu()">Gallery</a></li>
      <li><a href="#contact" (click)="closeMobileMenu()">Contact</a></li>
    </ul>
    <div class="get-started">
      <a href="/customer" class="btn">Get Started</a>
    </div>
  </div>
</nav>

<!-- Mobile Menu Overlay -->
<div
  class="mobile-menu-overlay"
  [class.active]="mobileMenuOpen"
  (click)="closeMobileMenu()"
></div>

<!-- Hero Section -->
<header
  class="hero"
  id="hero"
  [ngStyle]="{
    'background-image': content
      ? 'url(' + content.heroBackgroundUrl + ')'
      : 'none'
  }"
>
  <div class="hero-content" *ngIf="content && !isLoadingContent">
    <h2>
      {{ content.heroTitle.split(" ").slice(0, 1).join(" ") }} <br />
      {{ content.heroTitle.split(" ").slice(1).join(" ") || "" }}
    </h2>
    <p>
      {{ content.heroDescription }}
    </p>
    <a (click)="onBookNowClick()" class="book-now-btn">Book Now</a>
  </div>
</header>

<!-- Pricing Section -->
<section class="pricing" id="pricing">
  <div class="pricing-container">
    <div class="section-header">
      <h2>Service Packages & Pricing</h2>
      <p>Choose the perfect service package for your vehicle</p>
    </div>

    <!-- Service Packages Explanation -->
    <div class="packages-explanation">
      <h3>Service Package Details</h3>
      <div class="packages-grid">
        <div *ngFor="let package of servicePackages" class="package-info">
          <h4>Package {{ package.code.replace("p", "") }}</h4>
          <p>{{ package.description }}</p>
        </div>
      </div>
    </div>

    <!-- Vehicle Types Explanation -->
    <div class="vehicle-types-explanation">
      <h3>Vehicle Type Classification</h3>
      <div class="vehicle-types-grid">
        <div *ngFor="let vehicle of vehicleTypes" class="vehicle-info">
          <h4>{{ vehicle.code }}</h4>
          <p>{{ vehicle.description }}</p>
        </div>
      </div>
    </div>

    <!-- Pricing Matrix -->
    <div class="pricing-section">
      <h3>Pricing Matrix</h3>

      <!-- Loading State -->
      <div *ngIf="loading" class="loading-state">
        <div class="loading-spinner"></div>
        <p>Loading pricing information...</p>
      </div>

      <!-- Error State -->
      <div *ngIf="pricingError && !loading" class="error-state">
        <p class="error-message">{{ pricingError }}</p>
        <button class="btn-primary" (click)="loadPricingData()">
          Try Again
        </button>
      </div>

      <!-- Pricing Table -->
      <div *ngIf="!loading && !pricingError" class="pricing-table-container">
        <div class="pricing-table">
          <table>
            <thead>
              <tr>
                <th class="vehicle-header">Vehicle Type</th>
                <th
                  *ngFor="let package of servicePackages"
                  class="package-header"
                >
                  <div class="package-title">Package {{ package.code }}</div>
                  <div class="package-desc">{{ package.description }}</div>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let vehicle of vehicleTypes" class="vehicle-row">
                <td class="vehicle-cell">
                  <div class="vehicle-code">{{ vehicle.code }}</div>
                  <div class="vehicle-desc">{{ vehicle.description }}</div>
                </td>
                <td *ngFor="let package of servicePackages" class="price-cell">
                  <div class="price-amount">
                    {{ formatPrice(getPrice(vehicle.code, package.code)) }}
                  </div>
                  <!-- <button
                    class="btn-book-service"
                    (click)="
                      navigateToAppointmentWithPackage(
                        vehicle.code,
                        package.code
                      )
                    "
                    [disabled]="!isPriceAvailable(vehicle.code, package.code)"
                    [ngClass]="{
                      disabled: !isPriceAvailable(vehicle.code, package.code)
                    }"
                  >
                    {{
                      isPriceAvailable(vehicle.code, package.code)
                        ? "Book Now"
                        : "Unavailable"
                    }}
                  </button> -->
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Quick Booking Guide -->
      <div class="booking-guide">
        <h4 class="booking-title">How to Book</h4>
        <ol class="booking-steps">
          <li>Add a vehicle to your customer profile</li>
          <li>Identify your vehicle type from the classification above</li>
          <li>Choose your preferred service package</li>
          <li>Click "Book Now" for your selected combination</li>
          <li>Complete your appointment details</li>
        </ol>
      </div>
    </div>
  </div>
</section>

<!-- Gallery Section -->
<section class="gallery" id="gallery">
  <h2>GALLERY</h2>
  <div class="gallery-container" *ngIf="content">
    <div class="gallery-item" *ngFor="let g of content.galleryImages">
      <img
        [src]="g.url"
        [alt]="g.alt || 'Gallery image'"
        [title]="g.alt || 'Gallery image'"
        title="Gallery image"
        loading="lazy"
      />
    </div>
  </div>
</section>

<!-- Contact Section -->
<section class="contact" id="contact">
  <h2>Contact for any Query</h2>
  <div class="contact-info">
    <div class="quick-contact" *ngIf="content">
      <h3>Quick Contact Info</h3>
      <div class="contact-item">
        <i class="fas fa-map-marker-alt"></i>
        <p><strong>Address:</strong> {{ content.contactInfo.address }}</p>
      </div>
      <div class="contact-item">
        <i class="fas fa-clock"></i>
        <p>
          <strong>Opening Time:</strong> {{ content.contactInfo.openingHours }}
        </p>
      </div>
      <div class="contact-item">
        <i class="fas fa-phone"></i>
        <p><strong>Call Us:</strong> {{ content.contactInfo.phone }}</p>
      </div>
      <div class="contact-item">
        <i class="fas fa-envelope"></i>
        <p><strong>Email Us:</strong> {{ content.contactInfo.email }}</p>
      </div>
    </div>
    <form
      class="contact-form"
      (ngSubmit)="onSubmitContactForm()"
      #contactFormRef="ngForm"
    >
      <!-- Success/Error Messages -->
      <div *ngIf="contactSuccessMessage" class="success-message">
        {{ contactSuccessMessage }}
      </div>
      <div *ngIf="contactErrorMessage" class="error-message">
        {{ contactErrorMessage }}
      </div>

      <input
        type="text"
        class="input-medium"
        id="yourname"
        name="name"
        [(ngModel)]="contactForm.name"
        placeholder="Your Name"
        required
      />
      <input
        type="email"
        class="input-medium"
        id="youremail"
        name="email"
        [(ngModel)]="contactForm.email"
        placeholder="Your Email"
        required
      />
      <input
        type="text"
        class="input-small"
        id="subject"
        name="subject"
        [(ngModel)]="contactForm.subject"
        placeholder="Subject"
        required
      />
      <textarea
        class="input-large"
        id="message"
        name="message"
        [(ngModel)]="contactForm.message"
        placeholder="Message"
        required
      ></textarea>
      <button type="submit" [disabled]="isSubmitting">
        <span *ngIf="!isSubmitting">Send Message</span>
        <span *ngIf="isSubmitting">Sending...</span>
      </button>
    </form>
  </div>
</section>

<!-- Footer Section -->
<footer class="footer">
  <div class="footer-container">
    <div class="quick-links">
      <h3>Quick Links</h3>
      <ul>
        <li><a href="#hero">Home</a></li>
        <li><a href="#pricing">Services</a></li>
        <li><a href="#pricing">Pricing</a></li>
        <li><a href="#gallery">Gallery</a></li>
        <li><a href="#contact">Contact</a></li>
        <li><a routerLink="/admin">Admin Login</a></li>
        <li><a routerLink="/employee">Employee Login</a></li>
      </ul>
    </div>
    <div class="contact-us" *ngIf="content">
      <h3>Contact Us</h3>
      <div class="contact-footer-item">
        <i class="fas fa-map-marker-alt"></i>
        <p><strong>Address:</strong> {{ content.contactInfo.address }}</p>
      </div>
      <div class="contact-footer-item">
        <i class="fas fa-phone"></i>
        <p><strong>Phone:</strong> {{ content.contactInfo.phone }}</p>
      </div>
      <div class="contact-footer-item">
        <i class="fas fa-envelope"></i>
        <p><strong>Email:</strong> {{ content.contactInfo.email }}</p>
      </div>
    </div>
    <div class="follow-us" *ngIf="content">
      <h3>Follow Us</h3>
      <div class="social-links">
        <a [href]="content.footer.facebook" target="_blank">Facebook</a>
        <span class="separator">|</span>
        <a [href]="content.footer.instagram" target="_blank">Instagram</a>
        <span class="separator">|</span>
        <a [href]="content.footer.twitter" target="_blank">Twitter</a>
        <span class="separator">|</span>
        <a [href]="content.footer.tiktok" target="_blank">TikTok</a>
      </div>
      <a routerLink="/customer" class="booknow-button">Book Now</a>
    </div>
  </div>
  <div class="footer-divider"></div>
  <div class="footer-bottom">
    <p *ngIf="content">
      {{ content.footer.copyright }}
    </p>
  </div>
</footer>

<!-- Custom Modal -->
<div class="modal-overlay" *ngIf="showModal">
  <div class="custom-modal">
    <div class="modal-header">
      <h3>Leydi boss</h3>
    </div>
    <div class="modal-body">
      <p>Do you want to proceed with booking?</p>
    </div>
    <div class="modal-footer">
      <button class="modal-btn modal-btn-ok" (click)="confirmBooking()">
        OK
      </button>
      <button class="modal-btn modal-btn-cancel" (click)="cancelBooking()">
        Cancel
      </button>
    </div>
  </div>
</div>

<!-- Email Verification Modal -->
<div class="modal-overlay" *ngIf="showVerificationModal">
  <div class="custom-modal verification-modal">
    <div class="modal-header">
      <h3>Verify Your Email</h3>
    </div>
    <div class="modal-body">
      <p>
        We've sent a 6-digit verification code to
        <strong>{{ verificationEmail }}</strong>
      </p>
      <p>Please enter the code below to verify your email address.</p>

      <!-- Error Message -->
      <div *ngIf="contactErrorMessage" class="error-message">
        {{ contactErrorMessage }}
      </div>

      <div class="verification-input">
        <input
          type="text"
          class="verification-code-input"
          [(ngModel)]="verificationCode"
          placeholder="Enter 6-digit code"
          maxlength="6"
          (keyup.enter)="verifyCode()"
          autofocus
        />
      </div>

      <div class="verification-actions">
        <button class="modal-btn modal-btn-ok" (click)="verifyCode()">
          Verify
        </button>
        <button
          class="modal-btn modal-btn-cancel"
          (click)="closeVerificationModal()"
        >
          Cancel
        </button>
      </div>

      <div class="resend-code">
        <p>Didn't receive the code?</p>
        <button class="resend-btn" (click)="resendVerificationCode()">
          Resend Code
        </button>
      </div>
    </div>
  </div>
</div>
